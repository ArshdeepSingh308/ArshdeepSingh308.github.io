<html>
   <head>
      <title> Arshdeep Singh</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.9.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.0.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.2.1"></script>
      <style>
         body {
         font-family: sans-serif;
         }
      </style>
   </head>
   <body>
      <table style="width: 850px;" cellspacing="5" cellpadding="5">
         <tbody>
            <tr>
               <td style="vertical-align: top;">Arshdeep Singh</td>
            </tr>
         </tbody>
      </table>
      <hr />
      <div id="vis"></div>
      <hr />
      <script type="text/javascript">
        var yourVlSpec =  
        {
            "$schema":"https://vega.github.io/schema/vega-lite/v4.json",
            "title":{
                "text":"Irish Primary School Explorer",
                "anchor":"middle",
                "fontSize":30
            },
            "hconcat":[
                {
                    "data":{
                        "url":"https://raw.githubusercontent.com/colmr/vis_class/master/primary_schools.csv"
                    },
                    "height":680,
                    "width":100,
                    "mark":"bar",
                    "selection":{
                        "select_county":{
                        "type":"multi",
                        "fields":[
                            "County"
                        ]
                        }
                    },
                    "transform":[
                        {
                        "filter":{
                            "selection":"Sex"
                        }
                        },
                        {
                        "filter":{
                            "selection":"brush"
                        }
                        }
                    ],
                    "encoding":{
                        "x":{
                        "field":"*",
                        "aggregate":"count",
                        "type":"quantitative",
                        "axis":{
                            "title":"Number of Schools",
                            "titleFontSize":13,
                            "labelFontSize":11
                        }
                        },
                        "y":{
                        "field":"County",
                        "type":"nominal",
                        "axis":{
                            "title":"",
                            "labelFontSize":11
                        }
                        },
                        "order":{
                        "field":"Sex",
                        "type":"nominal",
                        "sort":"descending"
                        },
                        "fillOpacity":{
                        "condition":{
                            "selection":"select_county",
                            "value":1
                        },
                        "value":0.3
                        },
                        "color":{
                        "field":"Sex",
                        "type":"nominal",
                        "scale":{
                            "domain":[
                                "Boys",
                                "Girls",
                                "Mixed"
                            ],
                            "range":[
                                "#2cdba1",
                                "#8101FA",
                                "#3571f3"
                            ]
                        }
                        }
                    }
                },
                {
                    "vconcat":[
                        {
                        "layer":[
                            {
                                "data":{
                                    "url":"https://raw.githubusercontent.com/colmr/vis_class/master/Ireland_custom_topjson.json",
                                    "format":{
                                    "type":"topojson",
                                    "feature":"IRL_adm1"
                                    }
                                },
                                "width":400,
                                "height":500,
                                "projection":{
                                    "type":"conicConformal"
                                },
                                "mark":{
                                    "type":"geoshape",
                                    "stroke":"white",
                                    "fill":"#ccc"
                                }
                            },
                            {
                                "data":{
                                    "url":"https://raw.githubusercontent.com/colmr/vis_class/master/primary_schools.csv"
                                },
                                "mark":"circle",
                                "selection":{
                                    "Sex":{
                                    "type":"multi",
                                    "fields":[
                                        "Sex"
                                    ],
                                    "bind":"legend"
                                    }
                                },
                                "transform":[
                                    {
                                    "filter":{
                                        "selection":"brush"
                                    }
                                    },
                                    {
                                    "filter":{
                                        "selection":"select_county"
                                    }
                                    }
                                ],
                                "encoding":{
                                    "longitude":{
                                    "field":"Long",
                                    "type":"quantitative"
                                    },
                                    "latitude":{
                                    "field":"Lat",
                                    "type":"quantitative"
                                    },
                                    "tooltip":{
                                    "field":"Off_Name",
                                    "type":"nominal"
                                    },
                                    "color":{
                                    "field":"Sex",
                                    "type":"nominal",
                                    "scale":{
                                        "domain":[
                                            "Boys",
                                            "Girls",
                                            "Mixed"
                                        ],
                                        "range":[
                                            "#2cdba1",
                                            "#8101FA",
                                            "#3571f3"
                                        ]
                                    }
                                    },
                                    "opacity":{
                                    "condition":{
                                        "selection":"Sex",
                                        "value":0.7
                                    },
                                    "value":0
                                    },
                                    "size":{
                                    "field":"Total",
                                    "type":"quantitative",
                                    "scale":{
                                        "domain":[
                                            1,
                                            1000
                                        ],
                                        "type":"quantile"
                                    }
                                    }
                                }
                            }
                        ]
                        },
                        {
                        "data":{
                            "url":"https://raw.githubusercontent.com/colmr/vis_class/master/primary_schools.csv"
                        },
                        "height":150,
                        "width":400,
                        "encoding":{
                            "x":{
                                "bin":{
                                    "maxbins":60
                                },
                                "field":"Total",
                                "type":"quantitative",
                                "axis":{
                                    "title":"Number of Students",
                                    "titleFontSize":13,
                                    "labelFontSize":11
                                }
                            },
                            "y":{
                                "field":"*",
                                "aggregate":"count",
                                "type":"quantitative",
                                "axis":{
                                    "title":"Schools",
                                    "titleFontSize":13,
                                    "labelFontSize":11
                                }
                            }
                        },
                        "layer":[
                            {
                                "transform":[
                                    {
                                    "filter":{
                                        "selection":"select_county"
                                    }
                                    },
                                    {
                                    "filter":{
                                        "selection":"Sex"
                                    }
                                    }
                                ],
                                "selection":{
                                    "brush":{
                                    "type":"interval",
                                    "encodings":[
                                        "x"
                                    ]
                                    }
                                },
                                "mark":{
                                    "type":"bar",
                                    "color":"grey"
                                }
                            },
                            {
                                "transform":[
                                    {
                                    "filter":{
                                        "selection":"brush"
                                    }
                                    },
                                    {
                                    "filter":{
                                        "selection":"select_county"
                                    }
                                    },
                                    {
                                    "filter":{
                                        "selection":"Sex"
                                    }
                                    }
                                ],
                                "mark":{
                                    "type":"bar",
                                    "color":"black"
                                }
                            }
                        ]
                        }
                    ]
                }
            ],
            "config":{
                "legend":{
                    "direction":"vertical",
                    "symbolBaseFillColor":"#ccc",
                    "labelFontSize":13,
                    "titleFontSize":16
                }
            }
        }
        vegaEmbed("#vis", yourVlSpec);
      </script>
   </body>
</html>